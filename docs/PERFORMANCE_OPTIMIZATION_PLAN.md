# ë©”ì¸í˜ì´ì§€ ì„±ëŠ¥ ìµœì í™” ê³„íšì„œ

## ğŸ“‹ ëª©ì°¨
1. [í˜„ì¬ êµ¬ì¡° ë¶„ì„](#í˜„ì¬-êµ¬ì¡°-ë¶„ì„)
2. [ì„±ëŠ¥ ë¬¸ì œ ì§„ë‹¨](#ì„±ëŠ¥-ë¬¸ì œ-ì§„ë‹¨)
3. [JSON ìºì‹œí™” ìµœì í™” ë°©ì•ˆ](#json-ìºì‹œí™”-ìµœì í™”-ë°©ì•ˆ)
4. [êµ¬í˜„ ë¡œë“œë§µ](#êµ¬í˜„-ë¡œë“œë§µ)
5. [ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ](#ì˜ˆìƒ-ì„±ëŠ¥-í–¥ìƒ)

---

## ğŸ” í˜„ì¬ êµ¬ì¡° ë¶„ì„

### ë©”ì¸í˜ì´ì§€ ë°ì´í„° ë¡œë”© í”Œë¡œìš°

```
ğŸ“± page.tsx (Server Component)
    â”œâ”€â”€ ğŸ”„ preloadHomePageData() [ì„œë²„ì‚¬ì´ë“œ ì§ì ‘ DB ì¿¼ë¦¬]
    â”‚   â”œâ”€â”€ ğŸ—ƒï¸ getProducts() â†’ products + product_images JOIN (20ê°œ)
    â”‚   â”œâ”€â”€ ğŸ“ getCategories() â†’ categories í…Œì´ë¸”
    â”‚   â”œâ”€â”€ ğŸ¨ getSections() â†’ ui_sections í…Œì´ë¸” (ë™ì  ìˆœì„œ)
    â”‚   â””â”€â”€ ğŸŒ getLanguagePacks() â†’ language_pack_* í…Œì´ë¸”ë“¤
    â”‚
    â”œâ”€â”€ ğŸ§© HomePageImproved (Client Component)
    â”‚   â””â”€â”€ ğŸ”„ DynamicSectionRenderer
    â”‚       â”œâ”€â”€ ğŸ“¡ /api/ui-sections (ì‹¤ì‹œê°„ ì„¹ì…˜ ì—…ë°ì´íŠ¸)
    â”‚       â””â”€â”€ ğŸ­ 24ê°œ ì„¹ì…˜ ì»´í¬ë„ŒíŠ¸ (Lazy Loading)
    â”‚
    â””â”€â”€ ğŸš€ JSON ìºì‹œ í”„ë¦¬í˜ì¹˜ ë§í¬ (í˜„ì¬ ë¯¸ì‚¬ìš©)
        â”œâ”€â”€ /cache/products/products-ko-page-1.json
        â””â”€â”€ /cache/products/products-ko-page-2.json
```

### ì–¸ì–´íŒ© ì‹œìŠ¤í…œ êµ¬ì¡°

```
ğŸŒ Language Pack System
â”œâ”€â”€ ğŸ“Š Database Tables:
â”‚   â”œâ”€â”€ language_settings (ì„ íƒëœ ì–¸ì–´: ["ko", "en", "fr"])
â”‚   â”œâ”€â”€ language_metadata (ì–¸ì–´ ë©”íƒ€ë°ì´í„°)
â”‚   â”œâ”€â”€ language_pack_keys (í‚¤ ì •ì˜)
â”‚   â””â”€â”€ language_pack_translations (ì‹¤ì œ ë²ˆì—­)
â”‚
â”œâ”€â”€ ğŸ”„ API Layer:
â”‚   â”œâ”€â”€ /api/admin/i18n/settings (ì–¸ì–´ ì„¤ì •)
â”‚   â””â”€â”€ getCachedLanguagePacks() (10ë¶„ ë©”ëª¨ë¦¬ ìºì‹œ)
â”‚
â””â”€â”€ ğŸ¯ Usage:
    â”œâ”€â”€ Static UI Text (menu.home, menu.products...)
    â”œâ”€â”€ Section Titles/Subtitles (hero, promo, category...)
    â””â”€â”€ Dynamic Content (admin ì„¤ì • ë²ˆì—­)
```

### UI ì„¹ì…˜ ë™ì  ê´€ë¦¬ ì‹œìŠ¤í…œ

```
ğŸ¨ UI Section Management
â”œâ”€â”€ ğŸ“Š Database: ui_sections í…Œì´ë¸”
â”‚   â”œâ”€â”€ key (ì„¹ì…˜ ì‹ë³„ì)
â”‚   â”œâ”€â”€ type (ì„¹ì…˜ íƒ€ì…: hero, category, promo...)
â”‚   â”œâ”€â”€ order (ì •ë ¬ ìˆœì„œ: 1, 2, 3...)
â”‚   â”œâ”€â”€ isActive (í™œì„± ìƒíƒœ)
â”‚   â”œâ”€â”€ data (ì„¹ì…˜ ì„¤ì • JSON)
â”‚   â””â”€â”€ translations (ë‹¤êµ­ì–´ ë²ˆì—­ JSON)
â”‚
â”œâ”€â”€ ğŸ”„ API Layer:
â”‚   â”œâ”€â”€ /api/ui-sections (CRUD + ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
â”‚   â””â”€â”€ /api/admin/ui-config/sections (ê´€ë¦¬ì ì„¤ì •)
â”‚
â”œâ”€â”€ ğŸ“¡ Real-time Updates:
â”‚   â”œâ”€â”€ Server-Sent Events (SSE)
â”‚   â”œâ”€â”€ broadcastUIUpdate()
â”‚   â””â”€â”€ useRealTimeUpdates() hook
â”‚
â””â”€â”€ ğŸ­ Frontend Rendering:
    â”œâ”€â”€ DynamicSectionRenderer (24ê°œ ì„¹ì…˜ ì§€ì›)
    â”œâ”€â”€ Lazy Loading + Suspense
    â””â”€â”€ ì‹¤ì‹œê°„ ìˆœì„œ ë³€ê²½/ì¶”ê°€/ì‚­ì œ
```

### ì–´ë“œë¯¼ - ì„¹ì…˜ ë™ì  ì—°ë™

```
ğŸ‘¨â€ğŸ’¼ Admin Integration
â”œâ”€â”€ ğŸ  /admin/ui-config
â”‚   â”œâ”€â”€ í—¤ë” ì„¤ì • (HeaderConfigDB)
â”‚   â”œâ”€â”€ í‘¸í„° ì„¤ì • (FooterConfigDB)
â”‚   â”œâ”€â”€ ì„¹ì…˜ ê´€ë¦¬ (SectionsConfigTab)
â”‚   â””â”€â”€ ì¹´í…Œê³ ë¦¬ ì„¤ì • (CategoryConfigTab)
â”‚
â”œâ”€â”€ ğŸ›ï¸ Section Management:
â”‚   â”œâ”€â”€ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ìˆœì„œ ë³€ê²½
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ í™œì„±/ë¹„í™œì„± í† ê¸€
â”‚   â”œâ”€â”€ ë‹¤êµ­ì–´ ë²ˆì—­ ì„¤ì •
â”‚   â””â”€â”€ ì„¹ì…˜ë³„ ìƒì„¸ ì„¤ì • í˜ì´ì§€
â”‚
â””â”€â”€ ğŸ“¡ ì‹¤ì‹œê°„ ë™ê¸°í™”:
    â”œâ”€â”€ ê´€ë¦¬ì ë³€ê²½ â†’ SSE ë¸Œë¡œë“œìºìŠ¤íŠ¸
    â”œâ”€â”€ í”„ë¡ íŠ¸ì—”ë“œ ìë™ ì—…ë°ì´íŠ¸
    â””â”€â”€ ìºì‹œ ë¬´íš¨í™” ìë™ ì²˜ë¦¬
```

---

## âš¡ ì„±ëŠ¥ ë¬¸ì œ ì§„ë‹¨

### ğŸŒ í˜„ì¬ ì„±ëŠ¥ ë³‘ëª©ì 

1. **ğŸ—„ï¸ ë§¤ë²ˆ 4ê°œ DB ì¿¼ë¦¬ ì‹¤í–‰**
   - ìƒí’ˆ (products + images JOIN)
   - ì¹´í…Œê³ ë¦¬ (categories)
   - UI ì„¹ì…˜ (ui_sections)  
   - ì–¸ì–´íŒ© (language_pack_* JOIN)

2. **ğŸ”„ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ ì§€ì—°**
   - ê° ìš”ì²­ë§ˆë‹¤ DB ì—°ê²° ë° ì¿¼ë¦¬ ì‹¤í–‰
   - JOIN ì¿¼ë¦¬ë¡œ ì¸í•œ ì¶”ê°€ ì§€ì—°

3. **ğŸ“± í´ë¼ì´ì–¸íŠ¸ ì¤‘ë³µ ìš”ì²­**
   - ì„œë²„ì—ì„œ ë¡œë“œ + í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¬ìš”ì²­
   - `/api/ui-sections` ì¤‘ë³µ í˜¸ì¶œ

4. **ğŸŒ ì–¸ì–´íŒ© ë³µì¡í•œ JOIN ì¿¼ë¦¬**
   - `language_pack_keys` + `language_pack_translations` JOIN
   - ë§¤ë²ˆ ì „ì²´ ì–¸ì–´íŒ© ë°ì´í„° ë¡œë“œ

---

## ğŸš€ JSON ìºì‹œí™” ìµœì í™” ë°©ì•ˆ

### ğŸ“‹ Phase 1: ì–¸ì–´íŒ© JSON ìºì‹œí™” â­ **ìµœìš°ì„ **

```
ğŸ“ /public/cache/language-packs/
â”œâ”€â”€ ko.json          // í•œêµ­ì–´ ì „ì²´ ì–¸ì–´íŒ©
â”œâ”€â”€ en.json          // ì˜ì–´ ì „ì²´ ì–¸ì–´íŒ©
â”œâ”€â”€ fr.json          // í”„ë‘ìŠ¤ì–´ ì „ì²´ ì–¸ì–´íŒ©
â””â”€â”€ manifest.json    // ìºì‹œ ë©”íƒ€ë°ì´í„° (ë²„ì „, ì—…ë°ì´íŠ¸ ì‹œê°„)
```

**ko.json êµ¬ì¡°:**
```json
{
  "menu.home": "í™ˆ",
  "menu.products": "ìƒí’ˆ",
  "menu.categories": "ì¹´í…Œê³ ë¦¬",
  "hero.title": "ë©”ì¸ ë°°ë„ˆ ì œëª©",
  "section.category.title": "ì¹´í…Œê³ ë¦¬",
  "section.promo.title": "í”„ë¡œëª¨ì…˜",
  // ... ëª¨ë“  ì–¸ì–´íŒ© í‚¤-ê°’
}
```

### ğŸ“‹ Phase 2: UI ì„¹ì…˜ JSON ìºì‹œí™” ğŸ¯ **ìš°ì„  êµ¬í˜„ ìš”ì²­**

```
ğŸ“ /public/cache/ui-sections/
â”œâ”€â”€ sections-ko.json  // í•œêµ­ì–´ UI ì„¹ì…˜ ì„¤ì •
â”œâ”€â”€ sections-en.json  // ì˜ì–´ UI ì„¹ì…˜ ì„¤ì •
â”œâ”€â”€ sections-fr.json  // í”„ë‘ìŠ¤ì–´ UI ì„¹ì…˜ ì„¤ì •
â””â”€â”€ manifest.json     // ì„¹ì…˜ ë©”íƒ€ë°ì´í„°
```

**sections-ko.json êµ¬ì¡°:**
```json
{
  "sections": [
    {
      "id": "hero",
      "key": "hero",
      "type": "hero", 
      "title": "ë©”ì¸ ë°°ë„ˆ",
      "order": 1,
      "isActive": true,
      "data": {
        "slides": [...],
        "autoplay": true
      },
      "translations": {
        "title": "ë©”ì¸ ë°°ë„ˆ",
        "subtitle": "íŠ¹ë³„ í• ì¸ ì´ë²¤íŠ¸"
      }
    },
    {
      "id": "category",
      "key": "category",
      "type": "category",
      "title": "ì¹´í…Œê³ ë¦¬",
      "order": 2,
      "isActive": true,
      "data": {
        "categories": [...]
      },
      "translations": {
        "title": "ì¹´í…Œê³ ë¦¬ë³„ ì‡¼í•‘"
      }
    }
    // ... ëª¨ë“  í™œì„± ì„¹ì…˜
  ],
  "metadata": {
    "totalSections": 8,
    "activeSections": 6,
    "lastUpdated": "2025-01-09T10:30:00Z",
    "version": "1.0.0"
  }
}
```

### ğŸ“‹ Phase 3: ìƒí’ˆ/ì¹´í…Œê³ ë¦¬ JSON ìºì‹œí™”

```
ğŸ“ /public/cache/products/
â”œâ”€â”€ products-ko-page-1.json   // í•œêµ­ì–´ ìƒí’ˆ 1í˜ì´ì§€
â”œâ”€â”€ products-en-page-1.json   // ì˜ì–´ ìƒí’ˆ 1í˜ì´ì§€
â”œâ”€â”€ products-fr-page-1.json   // í”„ë‘ìŠ¤ì–´ ìƒí’ˆ 1í˜ì´ì§€
â”œâ”€â”€ categories-ko.json        // í•œêµ­ì–´ ì¹´í…Œê³ ë¦¬
â”œâ”€â”€ categories-en.json        // ì˜ì–´ ì¹´í…Œê³ ë¦¬
â”œâ”€â”€ categories-fr.json        // í”„ë‘ìŠ¤ì–´ ì¹´í…Œê³ ë¦¬
â””â”€â”€ manifest.json             // ìƒí’ˆ ë©”íƒ€ë°ì´í„°
```

---

## ğŸ”§ êµ¬í˜„ ë¡œë“œë§µ

### ğŸ¥‡ Phase 1: ì–¸ì–´íŒ© JSON ìºì‹œí™” (1-2ì¼)

**êµ¬í˜„ í•­ëª©:**
1. `scripts/generate-language-cache.ts` ìƒì„± ìŠ¤í¬ë¦½íŠ¸
2. `lib/cache/language-packs.ts` â†’ JSON íŒŒì¼ ì½ê¸°ë¡œ ë³€ê²½
3. ê´€ë¦¬ìì—ì„œ ì–¸ì–´íŒ© ìˆ˜ì • ì‹œ ìë™ ì¬ìƒì„±
4. ìºì‹œ ë¬´íš¨í™” ë° ë²„ì „ ê´€ë¦¬

### ğŸ¥ˆ Phase 2: UI ì„¹ì…˜ JSON ìºì‹œí™” (2-3ì¼)

**êµ¬í˜„ í•­ëª©:**
1. `scripts/generate-ui-sections-cache.ts` ìƒì„± ìŠ¤í¬ë¦½íŠ¸
2. `lib/cache/preload-service.ts` â†’ JSON íŒŒì¼ ì½ê¸°ë¡œ ë³€ê²½
3. ê´€ë¦¬ìì—ì„œ ì„¹ì…˜ ë³€ê²½ ì‹œ ìë™ ì¬ìƒì„±
4. SSE ì—°ë™ìœ¼ë¡œ ì‹¤ì‹œê°„ ìºì‹œ ì—…ë°ì´íŠ¸

### ğŸ¥‰ Phase 3: ìƒí’ˆ/ì¹´í…Œê³ ë¦¬ JSON ìºì‹œí™” (3-4ì¼)

**êµ¬í˜„ í•­ëª©:**
1. `scripts/generate-products-cache.ts` ìƒì„± ìŠ¤í¬ë¦½íŠ¸  
2. `preloadHomePageData()` â†’ JSON íŒŒì¼ ì½ê¸°ë¡œ ë³€ê²½
3. ìƒí’ˆ/ì¹´í…Œê³ ë¦¬ ë³€ê²½ ì‹œ ìë™ ì¬ìƒì„±
4. í˜ì´ì§€ë„¤ì´ì…˜ ìºì‹œ ì§€ì›

### ğŸ† Phase 4: ì „ì²´ í†µí•© ìµœì í™” (1-2ì¼)

**êµ¬í˜„ í•­ëª©:**
1. í†µí•© ìºì‹œ ê´€ë¦¬ ì‹œìŠ¤í…œ
2. ìºì‹œ ë²„ì „ ê´€ë¦¬ ë° ë¬´íš¨í™”
3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ë²¤ì¹˜ë§ˆí¬
4. CDN ì—°ë™ ì¤€ë¹„

---

## ğŸ“Š ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ

| ìš°ì„ ìˆœìœ„ | í•­ëª© | í˜„ì¬ ì‹œê°„ | ì˜ˆìƒ ì‹œê°„ | í–¥ìƒë¥  | êµ¬í˜„ ë‚œì´ë„ |
|---------|------|----------|----------|--------|-----------|
| 1ï¸âƒ£ | ì–¸ì–´íŒ© JSON ìºì‹œ | 200ms | 60ms | **70%** | ğŸŸ¢ ì‰¬ì›€ |
| 2ï¸âƒ£ | UI ì„¹ì…˜ JSON ìºì‹œ | 150ms | 30ms | **80%** | ğŸŸ¡ ë³´í†µ |  
| 3ï¸âƒ£ | ìƒí’ˆ JSON ìºì‹œ | 300ms | 50ms | **83%** | ğŸŸ¡ ë³´í†µ |
| 4ï¸âƒ£ | ì „ì²´ í†µí•© ìµœì í™” | 800ms | 100ms | **87%** | ğŸ”´ ì–´ë ¤ì›€ |

**ì´ ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ: 800ms â†’ 100ms (87% í–¥ìƒ)**

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. âœ… **ë¶„ì„ ì™„ë£Œ**: ì „ì²´ êµ¬ì¡° íŒŒì•… ë° ë¬¸ì„œí™”
2. ğŸ¯ **ìš°ì„  êµ¬í˜„**: UI ì„¹ì…˜ JSON ìºì‹œí™” (ìš”ì²­ì‚¬í•­)
3. ğŸ” **í—¤ë” ë©”ë‰´ ë¬¸ì œ í•´ê²°**: ì–¸ì–´íŒ© ì—°ë™ ë¬¸ì œ ì¡°ì‚¬
4. ğŸ“ˆ **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ë²¤ì¹˜ë§ˆí¬ ë° ëª¨ë‹ˆí„°ë§ êµ¬ì¶•

---

## ğŸš¨ ì£¼ìš” ì´ìŠˆ

### í—¤ë” ë©”ë‰´ ë¬¸ì œ
- **í˜„ìƒ**: http://localhost:3003/admin/ui-config?tab=headerì—ì„œ ë©”ë‰´ ì¶”ê°€ ì‹œ ì˜¤ë¥˜
- **ì›ì¸**: ì–¸ì–´íŒ© ì—°ë™ ë¬¸ì œë¡œ ì¶”ì •
- **í•´ê²°ë°©ì•ˆ**: í—¤ë” ë©”ë‰´ ì‹œìŠ¤í…œê³¼ ì–¸ì–´íŒ© ì—°ë™ êµ¬ì¡° ì¬ì ê²€ í•„ìš”

---

*ğŸ“… ì‘ì„±ì¼: 2025-01-09*  
*ğŸ‘¤ ì‘ì„±ì: ì‹œìŠ¤í…œ ë¶„ì„ ë° ìµœì í™” íŒ€*  
*ğŸ”„ ì—…ë°ì´íŠ¸: êµ¬ì¡° ë¶„ì„ ì™„ë£Œ, ìµœì í™” ê³„íš ìˆ˜ë¦½*
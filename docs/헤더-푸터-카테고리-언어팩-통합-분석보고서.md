# π“ ν—¤λ”/ν‘Έν„°/μΉ΄ν…κ³ λ¦¬ μ–Έμ–΄ν© ν†µν•© λ¶„μ„ λ³΄κ³ μ„

## π“… μ‘μ„±μΌ: 2025-09-02
## π― λ©μ : ν—¤λ”/ν‘Έν„° UI Configμ™€ μΉ΄ν…κ³ λ¦¬ λ€λ¶„λ¥μ λ‹¤κµ­μ–΄ ν†µν•© μ‹μ¤ν… λ¶„μ„

---

## 1. π” ν„μ¬ μ‹μ¤ν… κµ¬μ΅° λ¶„μ„

### 1.1 ν—¤λ” μ„¤μ • (`/admin/ui-config?tab=header`)
```typescript
// components/admin/ui-config/HeaderConfigTab.tsx
- SortableMenuItemWithLanguagePack μ»΄ν¬λ„νΈ μ‚¬μ©
- λ“λκ·Έμ•¤λ“λ΅­μΌλ΅ λ©”λ‰΄ μμ„ λ³€κ²½
- config.header.menus λ°°μ—΄ κ΄€λ¦¬
- μ–Έμ–΄ν© μ—°λ™ λ¶€λ¶„ κµ¬ν„λ¨
```

**ν„μ¬ ν—¤λ” λ©”λ‰΄ κµ¬μ΅°:**
```typescript
interface MenuItem {
  id: string;
  label: string;      // ν•κµ­μ–΄λ§ μ €μ¥
  href: string;
  order: number;
  visible: boolean;
  // translations ν•„λ“ μ—†μ β
}
```

### 1.2 ν‘Έν„° μ„¤μ • (`/admin/ui-config?tab=footer`)
```typescript
// components/admin/ui-config/FooterConfigTab.tsx
- SortableFooterColumn μ»΄ν¬λ„νΈ μ‚¬μ©
- μ»¬λΌλ³„ λ§ν¬ κ΄€λ¦¬
- config.footer.columns λ°°μ—΄ κ΄€λ¦¬
- μ–Έμ–΄ν© λ―Έμ—°λ™ β
```

**ν„μ¬ ν‘Έν„° κµ¬μ΅°:**
```typescript
interface FooterColumn {
  id: string;
  title: string;      // ν•κµ­μ–΄λ§ μ €μ¥
  order: number;
  links: FooterLink[];
  // translations ν•„λ“ μ—†μ β
}
```

### 1.3 μΉ΄ν…κ³ λ¦¬ κ΄€λ¦¬ (`/admin/categories`)
```typescript
// app/api/admin/categories/route.ts
- STATIC_CATEGORIES ν•λ“μ½”λ”©
- ν•κµ­μ–΄ μ΄λ¦„λ§ μ΅΄μ¬
- λ‹¤κµ­μ–΄ μ§€μ› μ—†μ β
```

**ν„μ¬ μΉ΄ν…κ³ λ¦¬ κµ¬μ΅°:**
```typescript
{
  id: 'CAT-001',
  name: 'μ¤‘κ³  κ°€μ „μ ν’',    // ν•κµ­μ–΄λ§
  icon: 'π ',
  children: [...]
  // translations μ—†μ β
}
```

---

## 2. π μ–Έμ–΄ν© μ‹μ¤ν… ν„ν™©

### 2.1 μ–Έμ–΄ν© κ΄€λ¦¬ (`/admin/language-packs`)
```
DB: language_packs ν…μ΄λΈ”
β”β”€β”€ key: string (μ λ‹ν¬)
β”β”€β”€ ko: string
β”β”€β”€ en: string  
β””β”€β”€ jp: string
```

### 2.2 ν„μ¬ μ–Έμ–΄ μ»¨ν…μ¤νΈ
- **AdminLanguageContext**: κ΄€λ¦¬μλ” ν•­μƒ ν•κµ­μ–΄(ko)
- **LanguageContext**: μ‚¬μ©μλ” ko/en/jp μ„ νƒ κ°€λ¥

---

## 3. π”„ ν†µν•© ν”„λ΅μ„Έμ¤ μ„¤κ³„

### 3.1 ν—¤λ” λ©”λ‰΄ λ‹¤κµ­μ–΄ ν†µν•©

**Step 1: DB μ¤ν‚¤λ§ ν™•μ¥**
```sql
-- ui_configs ν…μ΄λΈ”μ config JSONB κµ¬μ΅° λ³€κ²½
{
  "header": {
    "menus": [
      {
        "id": "menu-1",
        "label": "ν™",
        "href": "/",
        "order": 1,
        "visible": true,
        "translations": {
          "ko": "ν™",
          "en": "Home",
          "jp": "γƒ›γƒΌγƒ "
        }
      }
    ]
  }
}
```

**Step 2: μΉ΄ν…κ³ λ¦¬ μ—°λ™**
```typescript
// ν—¤λ”μ— μΉ΄ν…κ³ λ¦¬ μλ™ μ¶”κ°€
const loadCategoriesForHeader = async () => {
  const categories = await fetch('/api/admin/categories');
  const mainCategories = categories.filter(cat => cat.level === 1);
  
  return mainCategories.map(cat => ({
    id: `cat-${cat.id}`,
    label: cat.name,
    href: `/products?category=${cat.slug}`,
    order: cat.menuOrder,
    visible: true,
    translations: {
      ko: cat.name,
      en: cat.nameEn || translateToEn(cat.name),
      jp: cat.nameJp || translateToJp(cat.name)
    }
  }));
};
```

### 3.2 ν‘Έν„° μ»¬λΌ λ‹¤κµ­μ–΄ ν†µν•©

**Step 1: FooterColumn μΈν„°νμ΄μ¤ ν™•μ¥**
```typescript
interface FooterColumn {
  id: string;
  title: string;
  order: number;
  links: FooterLink[];
  translations: {
    ko: string;
    en: string;
    jp: string;
  };
}

interface FooterLink {
  id: string;
  label: string;
  href: string;
  translations: {
    ko: string;
    en: string;
    jp: string;
  };
}
```

**Step 2: μΉ΄ν…κ³ λ¦¬ μλ™ μ¶”κ°€ μµμ…**
```typescript
// ν‘Έν„°μ— μΈκΈ° μΉ΄ν…κ³ λ¦¬ μ„Ήμ… μ¶”κ°€
const addPopularCategoriesToFooter = async () => {
  const categories = await fetch('/api/admin/categories?popular=true');
  
  return {
    id: 'popular-categories',
    title: 'μΈκΈ° μΉ΄ν…κ³ λ¦¬',
    order: 1,
    translations: {
      ko: 'μΈκΈ° μΉ΄ν…κ³ λ¦¬',
      en: 'Popular Categories',
      jp: 'δΊΊζ°—γ‚«γƒ†γ‚΄γƒγƒΌ'
    },
    links: categories.map(cat => ({
      id: cat.id,
      label: cat.name,
      href: `/products?category=${cat.slug}`,
      translations: {
        ko: cat.name,
        en: cat.nameEn,
        jp: cat.nameJp
      }
    }))
  };
};
```

### 3.3 μΉ΄ν…κ³ λ¦¬ λ‹¤κµ­μ–΄ ν™•μ¥

**Step 1: μΉ΄ν…κ³ λ¦¬ ν…μ΄λΈ” μ¤ν‚¤λ§ λ³€κ²½**
```sql
ALTER TABLE categories 
ADD COLUMN name_en VARCHAR(255),
ADD COLUMN name_jp VARCHAR(255),
ADD COLUMN description_en TEXT,
ADD COLUMN description_jp TEXT;
```

**Step 2: API μ‘λ‹µ κµ¬μ΅° κ°μ„ **
```typescript
// /api/admin/categories/route.ts
const getCategoriesWithTranslations = async (lang = 'ko') => {
  const categories = await query(`
    SELECT 
      id,
      CASE 
        WHEN $1 = 'en' THEN COALESCE(name_en, name)
        WHEN $1 = 'jp' THEN COALESCE(name_jp, name)
        ELSE name
      END as display_name,
      name as name_ko,
      name_en,
      name_jp,
      slug,
      icon,
      menu_order
    FROM categories
    WHERE is_active = true
    ORDER BY menu_order
  `, [lang]);
  
  return categories;
};
```

---

## 4. π”— ν†µν•© ν”λ΅μ°

### 4.1 μ „μ²΄ λ°μ΄ν„° νλ¦„
```
1. μ–Έμ–΄ν© μƒμ„± (/admin/language-packs)
   β†“
2. μΉ΄ν…κ³ λ¦¬ λ²μ—­ μ¶”κ°€ (/admin/categories)
   β†“
3. ν—¤λ” λ©”λ‰΄ κµ¬μ„± (/admin/ui-config?tab=header)
   - μλ™ λ©”λ‰΄ μ¶”κ°€
   - μΉ΄ν…κ³ λ¦¬ μλ™ λ¶λ¬μ¤κΈ°
   β†“
4. ν‘Έν„° μ»¬λΌ κµ¬μ„± (/admin/ui-config?tab=footer)
   - μ •λ³΄ λ§ν¬ μ¶”κ°€
   - μΈκΈ° μΉ΄ν…κ³ λ¦¬ μλ™ μ¶”κ°€
   β†“
5. JSON μƒμ„± λ° μΊμ‹±
   - /public/i18n/{lang}/header.json
   - /public/i18n/{lang}/footer.json
   - /public/i18n/{lang}/categories.json
   β†“
6. λ©”μΈνμ΄μ§€ λ λ”λ§
   - ν„μ¬ μ–Έμ–΄μ— λ§λ” λ°μ΄ν„° ν‘μ‹
```

### 4.2 μ‹¤μ‹κ°„ λ™κΈ°ν™”
```typescript
// Socket.io μ΄λ²¤νΈ μ¶”κ°€
socket.on('header:update', (data) => {
  // ν—¤λ” μ¬λ λ”λ§
  invalidateHeader();
});

socket.on('footer:update', (data) => {
  // ν‘Έν„° μ¬λ λ”λ§
  invalidateFooter();
});

socket.on('category:update', (data) => {
  // μΉ΄ν…κ³ λ¦¬ λ©”λ‰΄ μ¬λ λ”λ§
  invalidateCategories();
});
```

---

## 5. π“ κµ¬ν„ μ°μ„ μμ„

### Phase 1: μ¤ν‚¤λ§ ν™•μ¥ (μ¦‰μ‹)
1. β… categories ν…μ΄λΈ”μ— name_en, name_jp μ»¬λΌ μ¶”κ°€
2. β… ui_configsμ JSONBμ— translations ν•„λ“ μ¶”κ°€
3. β… λ²μ—­ API μ„λΉ„μ¤ μ—°λ™

### Phase 2: κ΄€λ¦¬μ UI κ°μ„  (1μΌ)
1. β³ HeaderConfigTabμ— μΉ΄ν…κ³ λ¦¬ λ¶λ¬μ¤κΈ° λ²„νΌ μ¶”κ°€
2. β³ FooterConfigTabμ— μΉ΄ν…κ³ λ¦¬ μ„Ήμ… μ¶”κ°€ μµμ…
3. β³ κ° λ©”λ‰΄/λ§ν¬μ— λ‹¤κµ­μ–΄ μ…λ ¥ ν•„λ“ μ¶”κ°€

### Phase 3: API ν†µν•© (2μΌ)
1. β³ /api/admin/categoriesμ— μ–Έμ–΄ νλΌλ―Έν„° μ§€μ›
2. β³ /api/admin/ui-configμ— λ²μ—­ μλ™ μƒμ„±
3. β³ JSON νμΌ μƒμ„± μλ™ν™”

### Phase 4: ν”„λ΅ νΈμ—”λ“ μ μ© (1μΌ)
1. β³ Header μ»΄ν¬λ„νΈ λ‹¤κµ­μ–΄ λ λ”λ§
2. β³ Footer μ»΄ν¬λ„νΈ λ‹¤κµ­μ–΄ λ λ”λ§
3. β³ μΉ΄ν…κ³ λ¦¬ λ©”λ‰΄ λ‹¤κµ­μ–΄ ν‘μ‹

---

## 6. π€ μμƒ ν¨κ³Ό

### 6.1 μ‚¬μ©μ κ²½ν— κ°μ„ 
- **μ–Έμ–΄ μ „ν™ μ‹**: ν—¤λ”/ν‘Έν„°/μΉ΄ν…κ³ λ¦¬ μ¦‰μ‹ λ²μ—­
- **μΌκ΄€μ„±**: λ¨λ“  UI μ”μ†κ°€ μ„ νƒλ μ–Έμ–΄λ΅ ν‘μ‹
- **SEO ν–¥μƒ**: λ‹¤κµ­μ–΄ λ©”νƒ€λ°μ΄ν„° μ§€μ›

### 6.2 κ΄€λ¦¬μ νΈμμ„±
- **μ¤‘μ•™ κ΄€λ¦¬**: UI Configμ—μ„ λ¨λ“  μ”μ† κ΄€λ¦¬
- **μλ™ λ²μ—­**: λ²μ—­ API μ—°λ™μΌλ΅ μλ™ μ‘μ—… κ°μ†
- **μ‹¤μ‹κ°„ λ―Έλ¦¬λ³΄κΈ°**: λ³€κ²½μ‚¬ν•­ μ¦‰μ‹ ν™•μΈ

### 6.3 μ‹μ¤ν… ν¨μ¨μ„±
- **μΊμ‹±**: JSON νμΌλ΅ μ„±λ¥ μµμ ν™”
- **μ¬μ‚¬μ©μ„±**: μ–Έμ–΄ν© ν‚¤ μ¬μ‚¬μ©
- **ν™•μ¥μ„±**: μƒ μ–Έμ–΄ μ¶”κ°€ μ©μ΄

---

## 7. β οΈ μ£Όμμ‚¬ν•­

1. **λ²μ—­ ν’μ§**: μλ™ λ²μ—­ ν›„ μλ™ κ²€μ ν•„μ”
2. **μΉ΄ν…κ³ λ¦¬ λ™κΈ°ν™”**: μΉ΄ν…κ³ λ¦¬ λ³€κ²½ μ‹ ν—¤λ”/ν‘Έν„° μλ™ μ—…λ°μ΄νΈ ν•„μ”
3. **μΊμ‹ λ¬΄ν¨ν™”**: μ–Έμ–΄ μ „ν™ μ‹ μΊμ‹ κ°±μ‹  νƒ€μ΄λ°
4. **ν΄λ°± μ²λ¦¬**: λ²μ—­ μ—†μ„ κ²½μ° κΈ°λ³Έ μ–Έμ–΄(ko) ν‘μ‹

---

## 8. π“‹ μ²΄ν¬λ¦¬μ¤νΈ

### λ°μ΄ν„°λ² μ΄μ¤
- [ ] categories ν…μ΄λΈ” λ‹¤κµ­μ–΄ μ»¬λΌ μ¶”κ°€
- [ ] ui_configs JSONB translations ν•„λ“ μ¶”κ°€
- [ ] language_packsμ— ν—¤λ”/ν‘Έν„° ν‚¤ μ¶”κ°€

### API
- [ ] /api/admin/categories λ‹¤κµ­μ–΄ μ§€μ›
- [ ] /api/admin/ui-config λ²μ—­ μλ™ν™”
- [ ] /api/translations ν†µν•© μ—”λ“ν¬μΈνΈ

### μ»΄ν¬λ„νΈ
- [ ] HeaderConfigTab μΉ΄ν…κ³ λ¦¬ μ—°λ™
- [ ] FooterConfigTab μΉ΄ν…κ³ λ¦¬ μ—°λ™
- [ ] SortableMenuItemWithLanguagePack κ°μ„ 

### JSON μƒμ„±
- [ ] /public/i18n/{lang}/header.json
- [ ] /public/i18n/{lang}/footer.json
- [ ] /public/i18n/{lang}/categories.json

---

## 9. π’΅ κ²°λ΅ 

ν„μ¬ μ‹μ¤ν…μ€ ν—¤λ”/ν‘Έν„°/μΉ΄ν…κ³ λ¦¬κ°€ κ°κ° λ…λ¦½μ μΌλ΅ κ΄€λ¦¬λκ³  μμΌλ©°, λ‹¤κµ­μ–΄ μ§€μ›μ΄ λ¶€λ¶„μ μΌλ΅λ§ κµ¬ν„λμ–΄ μμµλ‹λ‹¤.

**ν•µμ‹¬ κ°μ„  μ‚¬ν•­:**
1. μΉ΄ν…κ³ λ¦¬ λ€λ¶„λ¥λ¥Ό ν—¤λ” λ©”λ‰΄μ— μλ™ μ—°λ™
2. λ¨λ“  UI ν…μ¤νΈμ— translations ν•„λ“ μ¶”κ°€
3. μ–Έμ–΄ μ „ν™ μ‹ μ‹¤μ‹κ°„ λ™κΈ°ν™”

μ΄ ν†µν•©μ„ ν†µν•΄ κ΄€λ¦¬μλ” ν• κ³³μ—μ„ λ¨λ“  UI μ”μ†λ¥Ό λ‹¤κµ­μ–΄λ΅ κ΄€λ¦¬ν•  μ μκ² λ©λ‹λ‹¤.
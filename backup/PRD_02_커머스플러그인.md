# ğŸ“‹ PRD-02: ì»¤ë¨¸ìŠ¤ ë² ì´ìŠ¤ í”ŒëŸ¬ê·¸ì¸

## ğŸ¯ ì œí’ˆ ê°œìš”
**ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë²”ìš© ì»¤ë¨¸ìŠ¤ ì‹œìŠ¤í…œ**ìœ¼ë¡œ, ìƒí’ˆ ê´€ë¦¬, ì£¼ë¬¸ ì²˜ë¦¬, ê²°ì œ, ê³ ê° ê´€ë¦¬ ë“± ëª¨ë“  ì‡¼í•‘ëª°ì— í•„ìš”í•œ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬í–‰, íŒ¨ì…˜, ë””ì§€í„¸ ìƒí’ˆ ë“± ë‹¤ì–‘í•œ ë„ë©”ì¸ì—ì„œ í™•ì¥í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

### 1. ìƒí’ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ê¸°ë³¸ ìƒí’ˆ CRUD**: ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ
- **ì¹´í…Œê³ ë¦¬ ê´€ë¦¬**: ê³„ì¸µí˜• ì¹´í…Œê³ ë¦¬, íƒœê·¸ ì‹œìŠ¤í…œ
- **ì´ë¯¸ì§€ ê´€ë¦¬**: ë‹¤ì¤‘ ì´ë¯¸ì§€, ì¸ë„¤ì¼ ìë™ ìƒì„±
- **SEO ìµœì í™”**: ë©”íƒ€ íƒœê·¸, URL ìŠ¬ëŸ¬ê·¸
- **ì¬ê³  ê´€ë¦¬**: ìˆ˜ëŸ‰ ì¶”ì , ì¬ê³  ë¶€ì¡± ì•Œë¦¼

### 2. ê°€ê²© ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ê¸°ë³¸ ê°€ê²©**: ì •ê°€, í• ì¸ê°€, ì›ê°€
- **ë™ì  ê°€ê²©**: ì‹œê°„ë³„, ìˆ˜ëŸ‰ë³„ ê°€ê²© ë³€ë™
- **ì¿ í° ì‹œìŠ¤í…œ**: í• ì¸ ì¿ í°, ì ìš© ì¡°ê±´
- **ì„¸ê¸ˆ ê³„ì‚°**: ë¶€ê°€ì„¸, ì§€ì—­ë³„ ì„¸ìœ¨
- **í†µí™” ì§€ì›**: ë‹¤ì¤‘ í†µí™”, í™˜ìœ¨ ìë™ ì—…ë°ì´íŠ¸

### 3. ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ì£¼ë¬¸ ìƒì„±**: ì¥ë°”êµ¬ë‹ˆì—ì„œ ì£¼ë¬¸ ë³€í™˜
- **ì£¼ë¬¸ ìƒíƒœ**: ëŒ€ê¸°, ì²˜ë¦¬ì¤‘, ë°°ì†¡ì¤‘, ì™„ë£Œ, ì·¨ì†Œ
- **ì£¼ë¬¸ ì¶”ì **: ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
- **ë¶€ë¶„ ë°°ì†¡**: ì—¬ëŸ¬ ìƒí’ˆì˜ ê°œë³„ ë°°ì†¡
- **ì£¼ë¬¸ íˆìŠ¤í† ë¦¬**: ìƒíƒœ ë³€ê²½ ì´ë ¥

### 4. ì¥ë°”êµ¬ë‹ˆ ì‹œìŠ¤í…œ
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: ë©€í‹° ë””ë°”ì´ìŠ¤ ì¥ë°”êµ¬ë‹ˆ ë™ê¸°í™”
- **ê²ŒìŠ¤íŠ¸ ì¥ë°”êµ¬ë‹ˆ**: ë¹„íšŒì› ì¥ë°”êµ¬ë‹ˆ ì§€ì›
- **ìƒí’ˆ ì˜µì…˜**: ìƒ‰ìƒ, ì‚¬ì´ì¦ˆ, ìˆ˜ëŸ‰ ì„ íƒ
- **ìë™ ì €ì¥**: ì„¸ì…˜ ê¸°ë°˜ ì„ì‹œ ì €ì¥
- **ë§Œë£Œ ê´€ë¦¬**: ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ìë™ ì •ë¦¬

### 5. ê²°ì œ ì‹œìŠ¤í…œ
- **ë‹¤ì¤‘ ê²°ì œ ìˆ˜ë‹¨**: ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°„í¸ê²°ì œ
- **PG í†µí•©**: í† ìŠ¤í˜ì´ë¨¼ì¸ , ì´ë‹ˆì‹œìŠ¤, KCP
- **ê²°ì œ ìƒíƒœ ê´€ë¦¬**: ëŒ€ê¸°, ì™„ë£Œ, ì‹¤íŒ¨, í™˜ë¶ˆ
- **ìë™ ì˜ìˆ˜ì¦**: ì´ë©”ì¼ ì˜ìˆ˜ì¦ ë°œì†¡
- **ë¶„í•  ê²°ì œ**: í• ë¶€, ë¬´ì´ì í• ë¶€

### 6. ë°°ì†¡ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ë°°ì†¡ ë°©ë²•**: íƒë°°, ì§ì ‘ ë°°ì†¡, í”½ì—…
- **ë°°ì†¡ë¹„ ê³„ì‚°**: ë¬´ê²Œ, ì§€ì—­, ê¸ˆì•¡ë³„ ë°°ì†¡ë¹„
- **ë°°ì†¡ ì¶”ì **: ìš´ì†¡ì¥ ë²ˆí˜¸ ì—°ë™
- **ë°°ì†¡ ì¼ì •**: ì˜ˆìƒ ë°°ì†¡ì¼ ê³„ì‚°
- **íŠ¹ìˆ˜ ë°°ì†¡**: ë‹¹ì¼ë°°ì†¡, ìƒˆë²½ë°°ì†¡

## ğŸ—ï¸ ê¸°ìˆ  ì•„í‚¤í…ì²˜

### ë°ì´í„° ëª¨ë¸

#### ìƒí’ˆ (Products)
```typescript
interface BaseProduct {
  id: string;
  title: string;
  description: string;
  slug: string;
  status: 'draft' | 'published' | 'archived';
  
  // ê°€ê²© ì •ë³´
  pricing: {
    basePrice: number;
    comparePrice?: number;
    costPrice?: number;
    taxable: boolean;
    taxClass?: string;
  };
  
  // ì¬ê³  ì •ë³´
  inventory: {
    tracked: boolean;
    quantity?: number;
    lowStockThreshold?: number;
    allowBackorders: boolean;
  };
  
  // ë¶„ë¥˜ ë° íƒœê·¸
  categoryId: string;
  tags: string[];
  
  // ë¯¸ë””ì–´
  images: ProductImage[];
  
  // ë°°ì†¡ ì •ë³´
  shipping: {
    weight?: number;
    dimensions?: { length: number; width: number; height: number; };
    shippingClass?: string;
    requiresShipping: boolean;
  };
  
  // SEO
  seo: {
    metaTitle?: string;
    metaDescription?: string;
    focusKeyword?: string;
  };
  
  // í™•ì¥ í•„ë“œ
  attributes: Record<string, any>;
  
  createdAt: Date;
  updatedAt: Date;
}
```

#### ì£¼ë¬¸ (Orders)
```typescript
interface BaseOrder {
  id: string;
  orderNumber: string;
  status: 'pending' | 'processing' | 'shipped' | 'delivered' | 'cancelled' | 'refunded';
  
  // ê³ ê° ì •ë³´
  customer: {
    id?: string;
    email: string;
    firstName: string;
    lastName: string;
    phone?: string;
  };
  
  // ì£¼ë¬¸ ìƒí’ˆ
  items: OrderItem[];
  
  // ê¸ˆì•¡ ì •ë³´
  totals: {
    subtotal: number;
    shipping: number;
    tax: number;
    discount: number;
    total: number;
  };
  
  // ë°°ì†¡ ì •ë³´
  shipping: {
    address: Address;
    method: string;
    cost: number;
    trackingNumber?: string;
    estimatedDelivery?: Date;
  };
  
  // ê²°ì œ ì •ë³´
  payment: {
    method: string;
    status: 'pending' | 'paid' | 'failed' | 'refunded';
    transactionId?: string;
    gateway: string;
    paidAt?: Date;
  };
  
  // í• ì¸ ì •ë³´
  coupons: AppliedCoupon[];
  
  // ë©”ëª¨ ë° ì´ë ¥
  notes: OrderNote[];
  statusHistory: OrderStatusChange[];
  
  createdAt: Date;
  updatedAt: Date;
}
```

#### ì¥ë°”êµ¬ë‹ˆ (Cart)
```typescript
interface BaseCart {
  id: string;
  sessionId?: string;
  customerId?: string;
  
  items: CartItem[];
  
  totals: {
    subtotal: number;
    shipping: number;
    tax: number;
    discount: number;
    total: number;
  };
  
  // ì¿ í° ë° í• ì¸
  appliedCoupons: AppliedCoupon[];
  
  // ë°°ì†¡ ì •ë³´
  shippingAddress?: Address;
  shippingMethod?: string;
  
  // ë§Œë£Œ ê´€ë¦¬
  expiresAt: Date;
  updatedAt: Date;
}
```

### API ì„¤ê³„

#### ìƒí’ˆ API
```typescript
// GET /api/commerce/products
interface ProductListAPI {
  products: BaseProduct[];
  pagination: PaginationInfo;
  filters: FilterInfo;
}

// GET /api/commerce/products/:id
interface ProductDetailAPI {
  product: BaseProduct;
  variants?: ProductVariant[];
  related?: BaseProduct[];
}

// POST /api/commerce/products
interface CreateProductAPI {
  product: Omit<BaseProduct, 'id' | 'createdAt' | 'updatedAt'>;
}
```

#### ì£¼ë¬¸ API
```typescript
// POST /api/commerce/orders
interface CreateOrderAPI {
  cartId: string;
  customer: CustomerInfo;
  shipping: ShippingInfo;
  payment: PaymentInfo;
}

// GET /api/commerce/orders/:id
interface OrderDetailAPI {
  order: BaseOrder;
  timeline: OrderTimeline[];
}

// PATCH /api/commerce/orders/:id/status
interface UpdateOrderStatusAPI {
  status: OrderStatus;
  note?: string;
  notifyCustomer?: boolean;
}
```

#### ì¥ë°”êµ¬ë‹ˆ API
```typescript
// POST /api/commerce/cart/items
interface AddToCartAPI {
  productId: string;
  quantity: number;
  options?: Record<string, any>;
}

// GET /api/commerce/cart
interface GetCartAPI {
  cart: BaseCart;
  recommendations?: BaseProduct[];
}
```

### í™•ì¥ ì‹œìŠ¤í…œ

#### í”ŒëŸ¬ê·¸ì¸ í™•ì¥ ì¸í„°í˜ì´ìŠ¤
```typescript
interface CommerceExtension {
  // ìƒí’ˆ í™•ì¥
  extendProduct(product: BaseProduct): ExtendedProduct;
  
  // ì£¼ë¬¸ í™•ì¥
  extendOrder(order: BaseOrder): ExtendedOrder;
  
  // ì¥ë°”êµ¬ë‹ˆ í™•ì¥
  extendCart(cart: BaseCart): ExtendedCart;
  
  // ì»¤ìŠ¤í…€ í•„ë“œ ì •ì˜
  getCustomFields(): CustomFieldDefinition[];
  
  // ì»¤ìŠ¤í…€ ê²°ì œ ë¡œì§
  processPayment?(paymentData: PaymentData): Promise<PaymentResult>;
  
  // ì»¤ìŠ¤í…€ ë°°ì†¡ ë¡œì§
  calculateShipping?(items: CartItem[], address: Address): Promise<ShippingOption[]>;
}
```

#### ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
```typescript
interface CommerceEvents {
  // ìƒí’ˆ ì´ë²¤íŠ¸
  'product.created': (product: BaseProduct) => void;
  'product.updated': (product: BaseProduct, changes: Partial<BaseProduct>) => void;
  'product.deleted': (productId: string) => void;
  
  // ì£¼ë¬¸ ì´ë²¤íŠ¸
  'order.created': (order: BaseOrder) => void;
  'order.status_changed': (order: BaseOrder, oldStatus: OrderStatus) => void;
  'order.paid': (order: BaseOrder) => void;
  'order.shipped': (order: BaseOrder) => void;
  
  // ì¥ë°”êµ¬ë‹ˆ ì´ë²¤íŠ¸
  'cart.item_added': (cart: BaseCart, item: CartItem) => void;
  'cart.item_removed': (cart: BaseCart, itemId: string) => void;
  'cart.checkout': (cart: BaseCart) => void;
}
```

## ğŸ¨ UI ì»´í¬ë„ŒíŠ¸

### ê³µí†µ ì»¤ë¨¸ìŠ¤ ì»´í¬ë„ŒíŠ¸
- **ProductCard**: ìƒí’ˆ ì¹´ë“œ (ì´ë¯¸ì§€, ì œëª©, ê°€ê²©)
- **ProductGrid**: ìƒí’ˆ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- **ProductFilter**: ì¹´í…Œê³ ë¦¬, ê°€ê²©, ë¸Œëœë“œ í•„í„°
- **ProductSearch**: ì‹¤ì‹œê°„ ê²€ìƒ‰, ìë™ì™„ì„±
- **CartWidget**: ì¥ë°”êµ¬ë‹ˆ ìš”ì•½, ë¯¸ë‹ˆ ì¥ë°”êµ¬ë‹ˆ

### ìƒí’ˆ ìƒì„¸ ì»´í¬ë„ŒíŠ¸
- **ProductGallery**: ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬, í™•ëŒ€ë³´ê¸°
- **ProductInfo**: ì œëª©, ì„¤ëª…, ê°€ê²© ì •ë³´
- **ProductOptions**: ì˜µì…˜ ì„ íƒ (ìƒ‰ìƒ, ì‚¬ì´ì¦ˆ ë“±)
- **AddToCartForm**: ìˆ˜ëŸ‰ ì„ íƒ, ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
- **ProductReviews**: ë¦¬ë·° ëª©ë¡, í‰ì 

### ì£¼ë¬¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
- **CheckoutForm**: ë°°ì†¡ì§€, ê²°ì œ ì •ë³´ ì…ë ¥
- **OrderSummary**: ì£¼ë¬¸ ìš”ì•½, ì´ì•¡ ê³„ì‚°
- **PaymentMethods**: ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ
- **OrderTracking**: ì£¼ë¬¸ ìƒíƒœ, ë°°ì†¡ ì¶”ì 
- **OrderHistory**: ì£¼ë¬¸ ë‚´ì—­ ëª©ë¡

### ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
- **ProductManager**: ìƒí’ˆ ëª©ë¡, í¸ì§‘, ì‚­ì œ
- **OrderManager**: ì£¼ë¬¸ ëª©ë¡, ìƒíƒœ ê´€ë¦¬
- **CustomerManager**: ê³ ê° ì •ë³´, ì£¼ë¬¸ ì´ë ¥
- **ReportDashboard**: ë§¤ì¶œ, ì¬ê³ , í†µê³„

## ğŸ”Œ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ

### ì»¤ë¨¸ìŠ¤ í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤
```typescript
class CommercePlugin implements Plugin {
  name = 'commerce-base';
  version = '1.0.0';
  
  async install(context: PluginContext) {
    // ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±
    await this.createTables(context.database);
    
    // ê¸°ë³¸ ì„¤ì •ê°’ ì¶”ê°€
    await this.createSettings(context);
    
    // ê¸°ë³¸ ê¶Œí•œ ìƒì„±
    await this.createPermissions(context);
  }
  
  getRoutes(): RouteDefinition[] {
    return [
      { path: '/shop', component: ProductList, layout: 'public' },
      { path: '/shop/:id', component: ProductDetail, layout: 'public' },
      { path: '/cart', component: Cart, layout: 'public' },
      { path: '/checkout', component: Checkout, layout: 'public' },
      { path: '/admin/products', component: ProductManager, layout: 'admin', permission: 'commerce.products.manage' },
      { path: '/admin/orders', component: OrderManager, layout: 'admin', permission: 'commerce.orders.manage' },
    ];
  }
  
  getMenuItems(): MenuItem[] {
    return [
      {
        id: 'commerce',
        label: 'ì»¤ë¨¸ìŠ¤',
        icon: 'ShoppingCart',
        children: [
          { id: 'products', label: 'ìƒí’ˆ ê´€ë¦¬', path: '/admin/products' },
          { id: 'orders', label: 'ì£¼ë¬¸ ê´€ë¦¬', path: '/admin/orders' },
          { id: 'customers', label: 'ê³ ê° ê´€ë¦¬', path: '/admin/customers' },
          { id: 'coupons', label: 'ì¿ í° ê´€ë¦¬', path: '/admin/coupons' },
        ]
      }
    ];
  }
}
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### ìºì‹± ì „ëµ
- **ìƒí’ˆ ìºì‹œ**: ìì£¼ ì¡°íšŒë˜ëŠ” ìƒí’ˆ ì •ë³´ ìºì‹±
- **ê°€ê²© ìºì‹œ**: ë³µì¡í•œ ê°€ê²© ê³„ì‚° ê²°ê³¼ ìºì‹±
- **ì¬ê³  ìºì‹œ**: ì‹¤ì‹œê°„ ì¬ê³  ì •ë³´ ìºì‹±
- **ê²€ìƒ‰ ìºì‹œ**: ì¸ê¸° ê²€ìƒ‰ì–´, ê²€ìƒ‰ ê²°ê³¼ ìºì‹±

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- **ì¸ë±ì‹±**: ê²€ìƒ‰, í•„í„°ë§ìš© ë³µí•© ì¸ë±ìŠ¤
- **íŒŒí‹°ì…”ë‹**: ëŒ€ìš©ëŸ‰ ì£¼ë¬¸ ë°ì´í„° ì›”ë³„ íŒŒí‹°ì…˜
- **ì½ê¸° ì „ìš© ë³µì œë³¸**: ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
- **ì—°ê²° í’€ë§**: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìµœì í™”

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ê²°ì œ ë³´ì•ˆ
- **PCI DSS ì¤€ìˆ˜**: ì¹´ë“œ ì •ë³´ ì²˜ë¦¬ ë³´ì•ˆ í‘œì¤€
- **í† í°í™”**: ê²°ì œ ì •ë³´ ì•”í˜¸í™” ì €ì¥
- **3D Secure**: ì¶”ê°€ ì¸ì¦ ë‹¨ê³„
- **ì‚¬ê¸° íƒì§€**: ì´ìƒ ê±°ë˜ íŒ¨í„´ ê°ì§€

### ë°ì´í„° ë³´ì•ˆ
- **ê°œì¸ì •ë³´ ì•”í˜¸í™”**: ê³ ê° ì •ë³´ ì•”í˜¸í™” ì €ì¥
- **ì ‘ê·¼ ë¡œê·¸**: ë¯¼ê° ë°ì´í„° ì ‘ê·¼ ê¸°ë¡
- **GDPR ì¤€ìˆ˜**: ë°ì´í„° ì‚­ì œ, ìˆ˜ì • ê¶Œë¦¬
- **API ë³´ì•ˆ**: Rate limiting, ì¸ì¦ í† í°

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- ìƒí’ˆ CRUD ë¡œì§ í…ŒìŠ¤íŠ¸
- ê°€ê²© ê³„ì‚° ë¡œì§ í…ŒìŠ¤íŠ¸
- ì¬ê³  ê´€ë¦¬ ë¡œì§ í…ŒìŠ¤íŠ¸
- ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- ì¥ë°”êµ¬ë‹ˆ-ì£¼ë¬¸ ë³€í™˜ í…ŒìŠ¤íŠ¸
- ê²°ì œ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
- ë°°ì†¡ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
- ì´ë©”ì¼ ì•Œë¦¼ í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ìƒí’ˆ ê²€ìƒ‰-êµ¬ë§¤ í”Œë¡œìš°
- ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€-ê²°ì œ í”Œë¡œìš°
- ê´€ë¦¬ì ìƒí’ˆ ë“±ë¡ í”Œë¡œìš°
- ì£¼ë¬¸ ê´€ë¦¬ í”Œë¡œìš°

ì´ ì»¤ë¨¸ìŠ¤ ë² ì´ìŠ¤ í”ŒëŸ¬ê·¸ì¸ì€ ì—¬í–‰, íŒ¨ì…˜, ë””ì§€í„¸ ìƒí’ˆ ë“± ë‹¤ì–‘í•œ ë„ë©”ì¸ì—ì„œ í™•ì¥í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë²”ìš© ì»¤ë¨¸ìŠ¤ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.